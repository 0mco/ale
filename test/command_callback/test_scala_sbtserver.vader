" Author: ophirr33 <coghlan.ty@gmail.com>
" Description: Tests for the sbt Server lsp linter

Before:
  call ale#assert#SetUpLinterTest('scala', 'sbtserver')
After:
  call ale#assert#TearDownLinterTest()
Execute(should set sbtserver for sbt project with active.json):
  call ale#test#SetFilename('../scala_fixtures/valid_sbt_project/Main.scala')
  AssertLSPLanguage 'scala'
  AssertLSPOptions {}
  AssertLSPProject ale#path#Simplify(g:dir . 'command_callback/../scala_fixtures/valid_sbt_project')
  AssertLSPAddress '127.0.0.1:5211'
Execute(should not set sbtserver for sbt project without active.json):
  call ale#test#SetFilename('../scala_fixtures/no_active_sbt_project/Main.scala')
  AssertLSPLanguage 'scala'
  AssertLSPOptions {}
  AssertLSPProject ale#path#Simplify(g:dir . 'command_callback/../scala_fixtures/no_active_sbt_project')
  AssertLSPAddress ''
Execute(should not set sbtserver for sbt project without build.sbt):
  call ale#test#SetFilename('../scala_fixtures/invalid_sbt_project/Main.scala')
  AssertLSPLanguage 'scala'
  AssertLSPOptions {}
  AssertLSPProject ''
  AssertLSPAddress ''
